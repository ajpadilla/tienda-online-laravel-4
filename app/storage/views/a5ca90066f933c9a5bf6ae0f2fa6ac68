<?php $__env->startSection('title'); ?>
<?php /*<?php echo Lang::get('modulo.variable'); ?>*/ ?>
<?php echo trans('classifieds.searchs.title'); ?>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
<div class="row">
	<div class="col-lg-12">
		<div class="ibox float-e-margins">
			<div class="ibox-title">
				<h5> <?php echo trans('classifieds.searchs.subtitle'); ?> </h5>
			</div>
			<div class="ibox-content">
				<div class="row">
					<?php echo Form::open(['route' => 'classifieds.filterClassified','class'=>'form-horizontal','id' => 'formSearchClassified']); ?>

						<div class="col-lg-12">
							<div class="form-group">
								 <div class="col-sm-12">
								 	<div class="row">
								 		<div class="col-md-2 ">
											<?php echo Form::label('countryId', trans('classifieds.searchs.Country'),['class'=>'']); ?>


											 <?php echo Form::select('countryId',$country,null,['class' => 'chosen-select form-control','id'=>'countryId']); ?>

										</div>

										<div class="col-md-2">
											<?php echo Form::label('stateId', trans('classifieds.searchs.State'),['class'=>'']); ?>


											<?php echo Form::select('stateId',array(''),null,array('class' => 'form-control','placeholder'=> trans('classifieds.searchs.State'),'id'=>'stateId')); ?>

										</div>
										
										<div class="col-md-2">
											<?php echo Form::label('cityId', trans('classifieds.searchs.City'),['class'=>'']); ?>

											<?php echo Form::select('cityId',array(''),null,array('class' => 'form-control','id'=>'cityId')); ?>

										</div>

										<div class="col-md-2">
											<?php echo Form::label('operator', trans('classifieds.labels.operator'),['class'=>'col-md-2 control-label']); ?>

											<?php echo Form::select('operator',
												array('>' => '>', 
													'<' => '<',
													'>=' => '>=',
													'<=' => '<=',
													'==' => '=='
													,),
													null,array('class' => 'form-control','id'=>'operator')); ?>

										</div>

										<div class="col-md-2">
											<?php echo Form::label('price', trans('classifieds.labels.price'),['class'=>'']); ?>

											<?php echo Form::text('price',null, ['class' => 'form-control','placeholder' =>'']); ?>

											
										</div>

										<div class="col-md-2">
											<?php echo Form::label('classifiedConditionId', trans('classifieds.labels.condition'),['class'=>'']); ?>

										
											<?php echo Form::select('classifiedConditionId',$classifiedConditions,null,array('class' => 'form-control','id'=>'classifiedConditionId')); ?>

										</div>

								 	</div>
								 	<div class="row">
								 		<div class="col-md-2">
											<?php echo Form::label('classifiedTypeId', trans('classifieds.labels.Type'),['class'=>'']); ?>


											<?php echo Form::select('classifiedTypeId',$classifiedTypes,null,array('class' => 'form-control','id'=>'classifiedTypeId')); ?>

										</div>

										<div class="col-md-4 col-lg-offset-2">
											<?php echo Form::submit(trans('classifieds.labels.search'), ['class' => 'boton btn btn-primary']); ?>

										</div>
								 	</div>
								 </div>
							</div>
						</div>
					<?php echo Form::close(); ?>

				</div>
			</div>
		</div>
	</div>
</div>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('scripts'); ?>
	<script>
		$(document).ready(function () 
		{
			/*$("#countryId").chosen();

			$("#countryId").chosen().change(function(){
				console.log($(this).val());
			});
				
			$("#countryId").bind("change",function(){ console.log('hit'); });*/ 

			$('#countryId').click(function() {
				$.ajax({
					type: 'GET',
					url: '<?php echo URL::to('/statesForCountry/'); ?>',	
					data: {'countryId': $('#countryId').val()},
					dataType: "JSON",
					success: function(response) {
						console.log(response.success);
						console.log(response.states);
						if (response.success == true) {
							$('#stateId').html('');
							$('#stateId').append('<option value=\"\"> <?php echo trans('classifieds.searchs.State'); ?> </option>');
							$.each(response.states,function (k,v){
								$('#stateId').append('<option value=\"'+k+'\">'+v+'</option>');
							});
						}else{
							$('#stateId').html('');
							$('#stateId').append('<option value=\"\"> <?php echo trans('classifieds.searchs.State'); ?> </option>');
						}
					}
				});
			});

			$('#stateId').click(function() {
				$.ajax({
					type: 'GET',
					url: '<?php echo URL::to('/citiesForState/'); ?>',	
					data: {'stateId': $('#stateId').val()},
					dataType: "JSON",
					success: function(response) {
						console.log(response.success);
						console.log(response.cities);
						if (response.success == true) {
							$('#cityId').html('');
							$('#cityId').append('<option value=\"\"> </option>');
							$.each(response.cities,function (k,v){
								$('#cityId').append('<option value=\"'+k+'\">'+v+'</option>');
							});
						}else{
							$('#cityId').html('');
							$('#cityId').append('<option value=\"\"> <?php echo trans('classifieds.searchs.City'); ?> </option>');
						}
					}
				});
			});
		});
	</script>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('styles'); ?>
	<style type="text/css">
		.boton {
			margin-top: 20px;
		}
	</style>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('layouts.template', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>